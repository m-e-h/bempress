!function(e,t){"function"==typeof define&&define.amd?define([],t(e)):"object"==typeof exports?module.exports=t(e):e.drop=t(e)}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";var t,n={},c=!!document.querySelector&&!!e.addEventListener,o={toggleActiveClass:"active",contentActiveClass:"active",initClass:"js-drop",callbackBefore:function(){},callbackAfter:function(){}},s=function(e,t,n){if("[object Object]"===Object.prototype.toString.call(e))for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(n,e[c],c,e);else for(var o=0,s=e.length;s>o;o++)t.call(n,e[o],o,e)},l=function(e,t){var n={};return s(e,function(t,c){n[c]=e[c]}),s(t,function(e,c){n[c]=t[c]}),n},i=function(e){for(var t=[],n=e.parentNode.firstChild;n;n=n.nextSibling)1==n.nodeType&&n!=e&&t.push(n);return t},r=function(e,t){for(var n=t.charAt(0);e&&e!==document;e=e.parentNode)if("."===n){if(e.classList.contains(t.substr(1)))return e}else if("#"===n){if(e.id===t.substr(1))return e}else if("["===n&&e.hasAttribute(t.substr(1,t.length-2)))return e;return null};n.toggleDrop=function(e,t,n){var c=l(c||o,t||{}),r=e.nextElementSibling,a=e.parentNode,u=i(a);c.callbackBefore(e),e.classList.toggle(c.toggleActiveClass),r.classList.toggle(c.contentActiveClass),a.classList.toggle(c.toggleActiveClass),s(u,function(e){var t=e.children;e.classList.remove(c.toggleActiveClass),s(t,function(e){e.classList.remove(c.contentActiveClass)})}),c.callbackAfter(e)},n.closeDrops=function(){var e=document.querySelectorAll(".menu-item-has-children > a."+t.toggleActiveClass),n=document.querySelectorAll(".menu-item-has-children."+t.toggleActiveClass),c=document.querySelectorAll(".sub-menu."+t.contentActiveClass);(e.length>0||n.length>0||c.length>0)&&(t.callbackBefore(),s(e,function(e){e.classList.remove(t.toggleActiveClass)}),s(n,function(e){e.classList.remove(t.toggleActiveClass)}),s(c,function(e){e.classList.remove(t.contentActiveClass)}),t.callbackAfter())};var a=function(e){var c=e.target,o=r(c,".sub-menu");(!o||c===document.documentElement||c.parentNode.classList.contains("menu-item-has-children"))&&(c!==document.documentElement&&c.parentNode.classList.contains("menu-item-has-children")?(e.preventDefault(),n.toggleDrop(c,t)):n.closeDrops())};return n.destroy=function(){t&&(document.documentElement.classList.remove(t.initClass),document.removeEventListener("click",a,!1),n.closeDrops(),t=null)},n.init=function(e){c&&(n.destroy(),t=l(o,e||{}),document.documentElement.classList.add(t.initClass),document.addEventListener("click",a,!1))},n});